<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ace="http://www.icefaces.org/icefaces/components">

<h:head>
    <meta charset="UTF-8"/>
    <title>я тима главная</title>
</h:head>

<h:body>
<h:outputStylesheet name="css/styles.css"/>
<h:outputStylesheet name="css/records_table.css"/>
<h:outputStylesheet name="css/slider.css"/>

<header class="header">
    <div class="fio">
        Лабор Тимофей Владимирович
    </div>
    <div class="group">
        P3225
    </div>
    <div class="variant">
        Вариант 408966
    </div>
</header>

<table class="main">
    <thead>
    </thead>

    <tbody>
    <h:form class="inputs-td" id="inputs-form">
    <tr>
        <td>
            <div class="graph">
                <canvas id="canvas"></canvas>
            </div>
        </td>
        <td>
            <div class="inputs">
                <div id="x-container" class="container">
                    <h:outputLabel class="text" for="x">
                        Укажите X:
                    </h:outputLabel>
                    <h:selectOneMenu id="x" value="#{point.x}" styleClass="x">
                        <f:selectItems value="#{point.getXValues()}"/>
                    </h:selectOneMenu>
                </div>
                <div id="y-container" class="container">
                    <h:outputLabel class="text" id="y-label" for="y">
                        Укажите Y:
                    </h:outputLabel>
                    <h:inputText id="y" styleClass="y" value="#{point.y}" required="true">
                        <f:convertNumber/>
                    </h:inputText>
                </div>
                <div id="r-container" class="container">
                    <h:outputLabel class="text">Укажите R:</h:outputLabel>
                    <h:inputText id="r-text" readonly="true"/>
                    <ace:sliderEntry id="slider"
                                     styleClass="r"
                                     min="1" max="5"
                                     length="210px"
                                     stepPercent="25"
                                     axis="x"
                                     value="#{point.r}"
                                     onSlideEnd="onSliderMove(event)"
                                     clickableRail="true"/>
                </div>
            </div>
            <p id="text-error"></p>
            <ace:messages id="messages" styleClass="messages" globalOnly="true" showSummary="true" showDetail="true"/>

            <h:commandButton value="Подтвердить"
                             action="#{resultController.submit}"
                             styleClass="button"
                             id="submit-button"
                             onclick="submitForm();">
            </h:commandButton>
        </td>
    </tr>
    <tr>
        <td colspan="2">
        <div class="records center-wrapper">
            <ace:dataTable value="#{indexController.getList()}"
                           var="result"
                           styleClass="records-table"
                           id="records-table">
                <ace:column>
                    <f:facet name="header">X</f:facet>
                    <h:outputText value="#{result.x}"/>
                </ace:column>
                <ace:column>
                    <f:facet name="header">Y</f:facet>
                    <h:outputText value="#{result.y}"/>
                </ace:column>
                <ace:column>
                    <f:facet name="header">R</f:facet>
                    <h:outputText value="#{result.r}"/>
                </ace:column>
                <ace:column>
                    <f:facet name="header">Статус</f:facet>
                    <h:outputText value="#{result.result}"/>
                </ace:column>
                <ace:column>
                    <f:facet name="header">Время выполнения, мс</f:facet>
                    <h:outputText value="#{result.executionTime}"/>
                </ace:column>
                <ace:column>
                    <f:facet name="header">Дата и время</f:facet>
                    <h:outputText value="#{result.createdAt} ms"/>
                </ace:column>
            </ace:dataTable>
        </div>
        </td>
    </tr>
    </h:form>
    <tr>
        <td>
            <h:form>
                <h:commandButton ajax="true" value="Очистить" action="#{removalController.clear}"
                                 styleClass="clear-button button" render="inputs-form:records-table" onclick="clearButtonClick();"/>
            </h:form>
        </td>
        <td>
            <h:form>
                <h:commandButton value="Перейти на титульную страницу"
                                 action="index?faces-redirect=true"
                                 styleClass="button"/>
            </h:form>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <h:form id="hidden-form" style="display: none;">
                <h:inputHidden id="x-hidden" value="#{point.x}"/>
                <h:inputHidden id="y-hidden" value="#{point.y}"/>
                <h:inputHidden id="r-hidden" value="#{point.r}"/>

                <h:inputHidden id="redirect" value="#{response.redirect}"/>

                <h:commandButton value="Подтвердить"
                                 style="display: none"
                                 action="#{resultController.submit}"
                                 id="hidden-submit-button"
                                 onclick="document.getElementById('hidden-form:redirect').value = 'false'">
                    <f:ajax execute="@form" render="inputs-form:records-table" />
                </h:commandButton>
            </h:form>
        </td>
    </tr>
    </tbody>
</table>

<h:outputScript name="scripts/scripts.js"/>
<h:outputScript name="scripts/graph.js"/>
</h:body>

</html>